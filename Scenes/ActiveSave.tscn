[gd_scene load_steps=25 format=3 uid="uid://b08reqxmoktvk"]

[ext_resource type="Script" uid="uid://c3i0ynvo54sk1" path="res://Scripts/Utility/ActiveSave.cs" id="1_2c3j4"]
[ext_resource type="Script" uid="uid://2vlhdf4w605i" path="res://Scripts/PlanetarySystem/PlanetSystem.cs" id="1_pocjb"]
[ext_resource type="CameraAttributesPractical" uid="uid://cyf8gikvidq0w" path="res://Assets/Misc/CamAttributes.tres" id="2_cbqy2"]
[ext_resource type="PackedScene" uid="uid://oo6ip25lyjt3" path="res://Assets/Prefabs/Planets/OrbitRenderer.tscn" id="3_212tm"]
[ext_resource type="Material" uid="uid://bgcp3j11mrprb" path="res://Assets/Materials/Background.tres" id="3_sfn14"]
[ext_resource type="PackedScene" uid="uid://dt3jn2nr8pm3l" path="res://Assets/Prefabs/UI/planet_icon.tscn" id="4_yxkbd"]
[ext_resource type="Script" uid="uid://qcplqipy8mmr" path="res://Scripts/PlanetarySystem/ScaledSpace.cs" id="5_yxkbd"]
[ext_resource type="Script" uid="uid://ve83kys7a48x" path="res://Scripts/CameraControl/FlightCamera.cs" id="6_0mdm0"]
[ext_resource type="Script" uid="uid://chvjvd0id2y27" path="res://Scripts/CraftAssembly/Parts/PartManager.cs" id="6_2c3j4"]
[ext_resource type="Script" uid="uid://dn8105q754rdm" path="res://Scripts/CraftAssembly/CraftManager.cs" id="6_ijjgm"]
[ext_resource type="Theme" uid="uid://b4ia03110swah" path="res://Assets/Materials/GeneralUI/Theme.tres" id="7_yxkbd"]
[ext_resource type="Script" uid="uid://yt1hbw2t4y8b" path="res://Scripts/Colonies/ColonyManager.cs" id="8_gxrxs"]
[ext_resource type="PackedScene" uid="uid://bw23jl4jvv55y" path="res://Assets/Prefabs/UI/colony_icon.tscn" id="9_gusxr"]
[ext_resource type="Script" uid="uid://djpke18bqs2nu" path="res://Scripts/Abominations/RealityTangler.cs" id="13_sfn14"]
[ext_resource type="Script" uid="uid://byojjoj3wpnpd" path="res://Scripts/UserInterface/MapUI.cs" id="14_23wpb"]
[ext_resource type="Script" uid="uid://cyombaxie5vkw" path="res://Scripts/Utility/BuildingManager.cs" id="14_uc177"]
[ext_resource type="Script" uid="uid://b2koecyr2n2mv" path="res://Scripts/UserInterface/ContextMenus/PartMenuHandler.cs" id="15_cbqy2"]
[ext_resource type="Script" uid="uid://b0otr6yt3ikn2" path="res://Scripts/UserInterface/ContextMenus/ColonyMenu.cs" id="15_p543u"]
[ext_resource type="Script" uid="uid://bc0vnn6dhlhug" path="res://Scripts/UserInterface/ContextMenus/ContextMenus.cs" id="15_ue2ba"]
[ext_resource type="PackedScene" uid="uid://c8odi3kjvqxhl" path="res://Assets/Prefabs/UI/part_menu.tscn" id="17_2vujl"]
[ext_resource type="PackedScene" uid="uid://dam6vsicmpefq" path="res://Assets/Meshes/Gizmo/gizmo.glb" id="17_h3s5b"]
[ext_resource type="Script" uid="uid://nutgi3n1uf8j" path="res://Scripts/UserInterface/ContextMenus/PlanetMenu.cs" id="17_ue2ba"]

[sub_resource type="BoxMesh" id="BoxMesh_h3s5b"]
material = ExtResource("3_sfn14")
flip_faces = true

[sub_resource type="Environment" id="Environment_h3s5b"]
background_mode = 1
ssao_radius = 12.11
ssao_intensity = 13.62
ssao_detail = 3.03

[node name="ActiveSave" type="Node3D" node_paths=PackedStringArray("planetSystem", "partManager", "colonyManager", "flightCam", "localCamera", "localSpace")]
script = ExtResource("1_2c3j4")
planetSystem = NodePath("PlanetSystem")
partManager = NodePath("PartManager")
colonyManager = NodePath("ColonyManager")
flightCam = NodePath("FlightCamera")
localCamera = NodePath("RenderLayers/LocalContainer/LocalView/Camera3D")
localSpace = NodePath("RenderLayers/LocalContainer/LocalView/LocalSpace")

[node name="RenderLayers" type="Control" parent="."]
z_index = -5
texture_filter = 1
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="BackgroundContainer" type="SubViewportContainer" parent="RenderLayers"]
z_index = -1
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
stretch = true

[node name="BackgView" type="SubViewport" parent="RenderLayers/BackgroundContainer"]
transparent_bg = true
handle_input_locally = false
msaa_3d = 2
screen_space_aa = 1
size = Vector2i(1920, 1080)
render_target_update_mode = 4

[node name="Camera3D" type="Camera3D" parent="RenderLayers/BackgroundContainer/BackgView"]
cull_mask = 1047556
fov = 90.0
far = 100000.0

[node name="Background" type="Node3D" parent="RenderLayers/BackgroundContainer/BackgView"]

[node name="Sky" type="MeshInstance3D" parent="RenderLayers/BackgroundContainer/BackgView/Background"]
transform = Transform3D(10000, 0, 0, 0, 10000, 0, 0, 0, 10000, 0, 0, 0)
layers = 4
mesh = SubResource("BoxMesh_h3s5b")
skeleton = NodePath("../../../../../Miscellaneous/gizmo")

[node name="ScaledContainer" type="SubViewportContainer" parent="RenderLayers"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
stretch = true

[node name="ScaledView" type="SubViewport" parent="RenderLayers/ScaledContainer"]
transparent_bg = true
handle_input_locally = false
msaa_3d = 2
screen_space_aa = 1
size = Vector2i(1920, 1080)
render_target_update_mode = 4

[node name="Camera3D" type="Camera3D" parent="RenderLayers/ScaledContainer/ScaledView"]
cull_mask = 1047554
attributes = ExtResource("2_cbqy2")
fov = 90.0
near = 0.51
far = 10000000.0

[node name="ScaledSpace" type="Node3D" parent="RenderLayers/ScaledContainer/ScaledView" node_paths=PackedStringArray("flightCamera")]
script = ExtResource("5_yxkbd")
flightCamera = NodePath("../../../../FlightCamera")

[node name="LocalContainer" type="SubViewportContainer" parent="RenderLayers"]
z_index = 1
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
stretch = true

[node name="LocalView" type="SubViewport" parent="RenderLayers/LocalContainer"]
transparent_bg = true
handle_input_locally = false
msaa_3d = 2
screen_space_aa = 1
oversampling = false
size = Vector2i(1920, 1080)
render_target_update_mode = 4

[node name="Camera3D" type="Camera3D" parent="RenderLayers/LocalContainer/LocalView"]
cull_mask = 1047553
attributes = ExtResource("2_cbqy2")
current = true
fov = 90.0
far = 1000000.0

[node name="LocalSpace" type="Node3D" parent="RenderLayers/LocalContainer/LocalView"]

[node name="Planets" type="Node3D" parent="RenderLayers/LocalContainer/LocalView/LocalSpace"]

[node name="OrbitRenderers" type="Control" parent="RenderLayers"]
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="PlanetSystem" type="Node3D" parent="." node_paths=PackedStringArray("planetIcons", "localCamera", "localSpace", "scaledSpace", "orbitRenderers")]
script = ExtResource("1_pocjb")
orbitRendererPrefab = ExtResource("3_212tm")
planetIconPrefab = ExtResource("4_yxkbd")
planetIcons = NodePath("../UI/MapUI/PlanetIcons")
localCamera = NodePath("../RenderLayers/LocalContainer/LocalView/Camera3D")
localSpace = NodePath("../RenderLayers/LocalContainer/LocalView/LocalSpace")
scaledSpace = NodePath("../RenderLayers/ScaledContainer/ScaledView/ScaledSpace")
orbitRenderers = NodePath("../RenderLayers/OrbitRenderers")
DEBUG_GizmoPrefab = ExtResource("17_h3s5b")

[node name="PartManager" type="Node" parent="."]
script = ExtResource("6_2c3j4")

[node name="CraftManager" type="Node" parent="."]
script = ExtResource("6_ijjgm")

[node name="ColonyManager" type="Node" parent="." node_paths=PackedStringArray("iconParent")]
script = ExtResource("8_gxrxs")
iconPrefab = ExtResource("9_gusxr")
iconParent = NodePath("../UI/MapUI/ColonyIcons")

[node name="RealityTangler" type="Node" parent="."]
process_priority = 100
script = ExtResource("13_sfn14")

[node name="BuildingManager" type="Node" parent="."]
script = ExtResource("14_uc177")

[node name="FlightCamera" type="Node3D" parent="." node_paths=PackedStringArray("rotNode_Y", "rotNode_X", "camNode")]
script = ExtResource("6_0mdm0")
multiplyScroll = true
lerpSpeed = 10.0
rotationAmnt = 0.5
rotNode_Y = NodePath("Cam_Rot_Y")
rotNode_X = NodePath("Cam_Rot_Y/Cam_Rot_X")
camNode = NodePath("Cam_Rot_Y/Cam_Rot_X/RemoteCams")
zoomAmnt = 1.1
zoom = 2.0

[node name="Cam_Rot_Y" type="Node3D" parent="FlightCamera"]

[node name="Cam_Rot_X" type="Node3D" parent="FlightCamera/Cam_Rot_Y"]

[node name="RemoteCams" type="Node3D" parent="FlightCamera/Cam_Rot_Y/Cam_Rot_X"]

[node name="Local" type="RemoteTransform3D" parent="FlightCamera/Cam_Rot_Y/Cam_Rot_X/RemoteCams"]
remote_path = NodePath("../../../../../RenderLayers/LocalContainer/LocalView/Camera3D")

[node name="Scaled" type="RemoteTransform3D" parent="FlightCamera/Cam_Rot_Y/Cam_Rot_X/RemoteCams"]
remote_path = NodePath("../../../../../RenderLayers/ScaledContainer/ScaledView/Camera3D")

[node name="Background" type="RemoteTransform3D" parent="FlightCamera/Cam_Rot_Y/Cam_Rot_X/RemoteCams"]
remote_path = NodePath("../../../../../RenderLayers/BackgroundContainer/BackgView/Camera3D")

[node name="RemoteTransform3D" type="RemoteTransform3D" parent="FlightCamera/Cam_Rot_Y/Cam_Rot_X/RemoteCams"]
remote_path = NodePath("../../../../../RenderLayers/BackgroundContainer/BackgView/Background/Sky")
update_rotation = false
update_scale = false

[node name="Miscellaneous" type="Node" parent="."]

[node name="gizmo" parent="Miscellaneous" instance=ExtResource("17_h3s5b")]
transform = Transform3D(0.02, 0, 0, 0, 0.02, 0, 0, 0, 0.02, 0, 0, 0)

[node name="WorldEnvironment" type="WorldEnvironment" parent="Miscellaneous"]
environment = SubResource("Environment_h3s5b")

[node name="Lights" type="Node" parent="."]

[node name="TestLight" type="DirectionalLight3D" parent="Lights"]
transform = Transform3D(0.9396926, -0.2620026, 0.21984634, 0, 0.6427876, 0.76604456, -0.34202012, -0.71984625, 0.60402286, 0, 0, 0)
layers = 3
shadow_enabled = true
shadow_bias = 0.075
shadow_blur = 0.5
directional_shadow_split_1 = 0.02
directional_shadow_split_2 = 0.05
directional_shadow_split_3 = 0.4
directional_shadow_max_distance = 8192.0

[node name="UI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="PartMenuHandler" type="Control" parent="UI" node_paths=PackedStringArray("contextMenus")]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
script = ExtResource("15_cbqy2")
contextMenus = NodePath("ContextMenus")
menuPrefab = ExtResource("17_2vujl")

[node name="ContextMenus" type="Control" parent="UI/PartMenuHandler" node_paths=PackedStringArray("menus")]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
script = ExtResource("15_ue2ba")
menus = []

[node name="MapUI" type="Control" parent="UI" node_paths=PackedStringArray("contextMenus")]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
theme = ExtResource("7_yxkbd")
script = ExtResource("14_23wpb")
contextMenus = NodePath("ContextMenus")

[node name="PlanetIcons" type="Control" parent="UI/MapUI"]
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0
mouse_filter = 2

[node name="ColonyIcons" type="Control" parent="UI/MapUI"]
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0
mouse_filter = 2

[node name="ContextMenus" type="Control" parent="UI/MapUI" node_paths=PackedStringArray("menus")]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
script = ExtResource("15_ue2ba")
menus = [NodePath("ColonyMenu"), NodePath("PlanetMenu")]

[node name="ColonyMenu" type="Panel" parent="UI/MapUI/ContextMenus" node_paths=PackedStringArray("title")]
visible = false
layout_mode = 0
offset_left = 1670.0
offset_top = 807.0
offset_right = 1891.0
offset_bottom = 1057.0
script = ExtResource("15_p543u")
title = NodePath("VBoxContainer/Title")

[node name="VBoxContainer" type="VBoxContainer" parent="UI/MapUI/ContextMenus/ColonyMenu"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 9.0
offset_top = 7.0
offset_right = -9.0
offset_bottom = -45.0
grow_horizontal = 2
grow_vertical = 2

[node name="Title" type="Label" parent="UI/MapUI/ContextMenus/ColonyMenu/VBoxContainer"]
layout_mode = 2
text = "COLONY NAME"

[node name="Label2" type="Label" parent="UI/MapUI/ContextMenus/ColonyMenu/VBoxContainer"]
layout_mode = 2
text = "OTHER INFO"

[node name="Label3" type="Label" parent="UI/MapUI/ContextMenus/ColonyMenu/VBoxContainer"]
layout_mode = 2
text = "OTHER INFO"

[node name="Label4" type="Label" parent="UI/MapUI/ContextMenus/ColonyMenu/VBoxContainer"]
layout_mode = 2
text = "OTHER INFO"

[node name="Label5" type="Label" parent="UI/MapUI/ContextMenus/ColonyMenu/VBoxContainer"]
layout_mode = 2
text = "OTHER INFO"

[node name="Label6" type="Label" parent="UI/MapUI/ContextMenus/ColonyMenu/VBoxContainer"]
layout_mode = 2
text = "OTHER INFO"

[node name="EnterButton" type="Button" parent="UI/MapUI/ContextMenus/ColonyMenu"]
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = 9.0
offset_top = -40.0
offset_right = 84.0
offset_bottom = -8.0
grow_vertical = 0
text = "Enter"

[node name="PlanetMenu" type="Panel" parent="UI/MapUI/ContextMenus" node_paths=PackedStringArray("title", "radius", "mass", "gravity")]
visible = false
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 1568.0
offset_top = 873.0
offset_right = -29.0
offset_bottom = -23.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("17_ue2ba")
title = NodePath("VBoxContainer/Title")
radius = NodePath("VBoxContainer/Radius")
mass = NodePath("VBoxContainer/Mass")
gravity = NodePath("VBoxContainer/Gravity")

[node name="VBoxContainer" type="VBoxContainer" parent="UI/MapUI/ContextMenus/PlanetMenu"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 9.0
offset_top = 7.0
offset_right = -9.0
offset_bottom = -6.0
grow_horizontal = 2
grow_vertical = 2

[node name="Title" type="Label" parent="UI/MapUI/ContextMenus/PlanetMenu/VBoxContainer"]
layout_mode = 2
text = "PLANET NAME"

[node name="Radius" type="Label" parent="UI/MapUI/ContextMenus/PlanetMenu/VBoxContainer"]
layout_mode = 2
text = "RADIUS"

[node name="Mass" type="Label" parent="UI/MapUI/ContextMenus/PlanetMenu/VBoxContainer"]
layout_mode = 2
text = "MASS"

[node name="Gravity" type="Label" parent="UI/MapUI/ContextMenus/PlanetMenu/VBoxContainer"]
layout_mode = 2
text = "GRAVITY"

[node name="Label5" type="Label" parent="UI/MapUI/ContextMenus/PlanetMenu/VBoxContainer"]
layout_mode = 2
text = "OTHER INFO"

[node name="Label6" type="Label" parent="UI/MapUI/ContextMenus/PlanetMenu/VBoxContainer"]
layout_mode = 2
text = "OTHER INFO"

[connection signal="pressed" from="UI/MapUI/ContextMenus/ColonyMenu/EnterButton" to="UI/MapUI/ContextMenus/ColonyMenu" method="EnterButtonPressed"]
